const QUIZ = [
  { question: "Вопрос 1", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 2", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 3", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 4", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 5", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 6", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 7", answers:[
    {text:"Ответ 1 (+1 саттва)", guna:"sat", value:1},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 8", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 9", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 10", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 11", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (0)", guna:"raj", value:0},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 12", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 13", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 14", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 15", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 16", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 17", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 18", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (0)", guna:"raj", value:0},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 19", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 20", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 21", answers:[
    {text:"Ответ 1 (+1 саттва)", guna:"sat", value:1},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 22", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 23", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 24", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 25", answers:[
    {text:"Ответ 1 (+1 саттва)", guna:"sat", value:1},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 26", answers:[
    {text:"Ответ 1 (+1 саттва)", guna:"sat", value:1},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 27", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 28", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 29", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+2 тамас)", guna:"tam", value:2},
    {text:"Ответ 3 (+1 раджас)", guna:"raj", value:1},
  ]},
  { question: "Вопрос 30", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+1 раджас)", guna:"raj", value:1},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 31", answers:[
    {text:"Ответ 1 (+2 саттва)", guna:"sat", value:2},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
  { question: "Вопрос 32", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+2 тамас)", guna:"tam", value:2},
  ]},
  { question: "Вопрос 33", answers:[
    {text:"Ответ 1 (+3 саттва)", guna:"sat", value:3},
    {text:"Ответ 2 (+2 раджас)", guna:"raj", value:2},
    {text:"Ответ 3 (+3 тамас)", guna:"tam", value:3},
  ]},
];

const GROUPS = {
  sat: {title:"Саттва — гармония", text:"Твоя природа — свет и ясность.", link:"https://t.me/+SNNjufNTtGJhMDI6"},
  raj: {title:"Раджас — действие", text:"Ты движим страстью и энергией.", link:"https://t.me/+B-mozvEpxM5kZjVi"},
  tam: {title:"Тамас — покой", text:"Тебе свойственна тяжесть и инерция.", link:"https://t.me/+K8aDzjYAsOg3Y2Fi"},
};

const app = {
  start: document.getElementById("screen-start"),
  quiz: document.getElementById("screen-quiz"),
  result: document.getElementById("screen-result"),
  btnStart: document.getElementById("btn-start"),
  btnRestart: document.getElementById("btn-restart"),
  qContainer: document.getElementById("question-container"),
  resultTitle: document.getElementById("result-title"),
  resultText: document.getElementById("result-text"),
  resultLink: document.getElementById("result-link"),
};

let state = {index:0, score:{sat:0,raj:0,tam:0}};

function showScreen(s){
  [app.start, app.quiz, app.result].forEach(x=>x.classList.remove("active"));
  s.classList.add("active");
}

function startQuiz(){
  state = {index:0, score:{sat:0,raj:0,tam:0}};
  showScreen(app.quiz);
  renderQuestion();
}

function renderQuestion(){
  const q = QUIZ[state.index];
  app.qContainer.innerHTML = `<h2>${q.question}</h2>`;
  q.answers.forEach(a=>{
    const btn = document.createElement("button");
    btn.className="answer";
    btn.textContent=a.text;
    btn.onclick=()=>selectAnswer(a);
    app.qContainer.appendChild(btn);
  });
}

function selectAnswer(a){
  state.score[a.guna]+=a.value;
  state.index++;
  if(state.index<QUIZ.length){
    renderQuestion();
  } else {
    finishQuiz();
  }
}

function finishQuiz(){
  let res = Object.entries(state.score).sort((a,b)=>b[1]-a[1])[0][0];
  let g = GROUPS[res];
  app.resultTitle.textContent=g.title;
  app.resultText.textContent=g.text;
  app.resultLink.href=g.link;
  showScreen(app.result);
}

app.btnStart.onclick=startQuiz;
app.btnRestart.onclick=()=>showScreen(app.start);
